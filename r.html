<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Fire - Battle Royale</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            font-family: 'Arial Black', Arial, sans-serif;
            overflow: hidden;
        }

        #gameContainer {
            position: relative;
            width: 1000px;
            height: 700px;
            background: #2d5016;
            border: 6px solid #ff4500;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 80px rgba(255, 69, 0, 0.4);
        }

        #canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        #hud {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px;
            z-index: 10;
        }

        .hud-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .hud-left {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .hud-item {
            background: rgba(0, 0, 0, 0.85);
            padding: 12px 18px;
            border-radius: 10px;
            border: 3px solid #ff4500;
        }

        .stat-label {
            font-size: 11px;
            color: #ffd700;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        .stat-value {
            font-size: 22px;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .health-container, .armor-container {
            width: 220px;
            height: 22px;
            background: #1a1a1a;
            border-radius: 12px;
            overflow: hidden;
            border: 3px solid #000;
            position: relative;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c 0%, #c0392b 100%);
            transition: width 0.3s;
            box-shadow: inset 0 0 10px rgba(255,255,255,0.3);
        }

        .armor-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db 0%, #2980b9 100%);
            transition: width 0.3s;
            box-shadow: inset 0 0 10px rgba(255,255,255,0.3);
        }

        .bar-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px black;
        }

        #character-info {
            background: rgba(0, 0, 0, 0.85);
            padding: 10px 15px;
            border-radius: 10px;
            border: 3px solid #ffd700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .character-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            border: 3px solid #ffd700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .character-details {
            flex: 1;
        }

        .character-name {
            font-size: 14px;
            color: #ffd700;
            font-weight: bold;
        }

        .character-ability {
            font-size: 10px;
            color: #aaa;
        }

        #minimap {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 180px;
            height: 180px;
            background: rgba(0, 0, 0, 0.9);
            border: 4px solid #ff4500;
            border-radius: 15px;
            z-index: 15;
            overflow: hidden;
        }

        #minimapCanvas {
            width: 100%;
            height: 100%;
        }

        #weapons {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 10;
        }

        .weapon-slot {
            background: rgba(0, 0, 0, 0.9);
            padding: 15px 20px;
            border-radius: 12px;
            border: 4px solid #555;
            min-width: 140px;
            text-align: center;
            transition: all 0.3s;
        }

        .weapon-slot.active {
            border-color: #ffd700;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.6);
            transform: scale(1.05);
        }

        .weapon-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .weapon-name {
            color: #ffd700;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .weapon-ammo {
            color: #fff;
            font-size: 20px;
            font-weight: bold;
        }

        #killFeed {
            position: absolute;
            top: 220px;
            right: 20px;
            width: 280px;
            z-index: 10;
            max-height: 300px;
            overflow: hidden;
        }

        .kill-message {
            background: rgba(0, 0, 0, 0.9);
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 5px solid #e74c3c;
            color: #fff;
            font-size: 13px;
            animation: slideIn 0.4s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        @keyframes slideIn {
            from { transform: translateX(320px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        #timer {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 15px 30px;
            border-radius: 12px;
            border: 4px solid #ffd700;
            text-align: center;
            z-index: 10;
        }

        .timer-label {
            font-size: 12px;
            color: #ffd700;
            margin-bottom: 5px;
        }

        .timer-value {
            font-size: 28px;
            color: #fff;
            font-weight: bold;
        }

        #startScreen, #characterSelect, #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 30;
        }

        h1 {
            color: #ff4500;
            font-size: 72px;
            margin-bottom: 15px;
            text-shadow: 6px 6px 0 #000;
            letter-spacing: 6px;
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 6px 6px 0 #000, 0 0 20px #ff4500; }
            50% { text-shadow: 6px 6px 0 #000, 0 0 40px #ff4500; }
        }

        .subtitle {
            color: #ffd700;
            font-size: 28px;
            margin-bottom: 40px;
            text-shadow: 3px 3px 0 #000;
        }

        .instructions {
            color: #fff;
            font-size: 16px;
            margin: 8px 0;
            text-align: center;
        }

        button {
            background: linear-gradient(135deg, #ff4500 0%, #ff6347 100%);
            color: white;
            border: 5px solid #000;
            padding: 20px 60px;
            font-size: 28px;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 0 #8b0000, 0 15px 30px rgba(0,0,0,0.5);
            margin-top: 30px;
            text-transform: uppercase;
        }

        button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 0 #8b0000, 0 20px 40px rgba(0,0,0,0.5);
        }

        button:active {
            transform: translateY(5px);
            box-shadow: 0 5px 0 #8b0000, 0 10px 20px rgba(0,0,0,0.5);
        }

        .character-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .character-card {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            border: 4px solid #555;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .character-card:hover {
            border-color: #ffd700;
            transform: scale(1.05);
        }

        .character-card.selected {
            border-color: #ff4500;
            box-shadow: 0 0 30px rgba(255, 69, 0, 0.6);
        }

        .char-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .char-name {
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .char-ability {
            color: #aaa;
            font-size: 12px;
            line-height: 1.4;
        }

        #finalStats {
            color: #ffd700;
            font-size: 26px;
            margin: 25px 0;
            text-align: center;
            line-height: 1.8;
        }

        #zoneWarning {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.95);
            color: white;
            padding: 25px 50px;
            border-radius: 15px;
            font-size: 28px;
            font-weight: bold;
            display: none;
            z-index: 25;
            animation: pulse 1s infinite;
            border: 5px solid #000;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.05); }
        }

        #crosshair {
            position: absolute;
            width: 35px;
            height: 35px;
            pointer-events: none;
            z-index: 25;
        }

        #crosshair::before, #crosshair::after {
            content: '';
            position: absolute;
            background: #00ff00;
            box-shadow: 0 0 8px #00ff00, 0 0 3px #000;
        }

        #crosshair::before {
            width: 3px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }

        #crosshair::after {
            width: 100%;
            height: 3px;
            top: 50%;
            transform: translateY(-50%);
        }

        .loot-item {
            position: absolute;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            animation: float 2s infinite;
            cursor: pointer;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #ability-cooldown {
            position: absolute;
            bottom: 120px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 12px 25px;
            border-radius: 10px;
            border: 3px solid #9b59b6;
            text-align: center;
            z-index: 10;
        }

        .ability-name {
            color: #9b59b6;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .ability-status {
            color: #fff;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="canvas" width="1000" height="700"></canvas>
        <div id="crosshair"></div>
        
        <div id="hud">
            <div class="hud-top">
                <div class="hud-left">
                    <div id="character-info">
                        <div class="character-avatar" id="charAvatar">üéØ</div>
                        <div class="character-details">
                            <div class="character-name" id="charName">Chrono</div>
                            <div class="character-ability" id="charAbility">Force Field Ready</div>
                        </div>
                    </div>
                    
                    <div class="hud-item">
                        <div class="stat-label">HEALTH</div>
                        <div class="health-container">
                            <div class="health-fill" id="healthFill" style="width: 100%"></div>
                            <div class="bar-text"><span id="healthText">100</span>/100</div>
                        </div>
                    </div>
                    
                    <div class="hud-item">
                        <div class="stat-label">ARMOR</div>
                        <div class="armor-container">
                            <div class="armor-fill" id="armorFill" style="width: 100%"></div>
                            <div class="bar-text"><span id="armorText">100</span>/100</div>
                        </div>
                    </div>
                </div>
                
                <div id="timer">
                    <div class="timer-label">MATCH TIME</div>
                    <div class="timer-value" id="timerValue">10:00</div>
                </div>
                
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <div class="hud-item">
                        <div class="stat-label">ALIVE</div>
                        <div class="stat-value" id="aliveCount">50</div>
                    </div>
                    
                    <div class="hud-item">
                        <div class="stat-label">KILLS</div>
                        <div class="stat-value" id="killCount">0</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="minimap">
            <canvas id="minimapCanvas" width="180" height="180"></canvas>
        </div>

        <div id="killFeed"></div>

        <div id="weapons">
            <div class="weapon-slot active" data-weapon="0">
                <div class="weapon-icon">üî´</div>
                <div class="weapon-name">M4A1</div>
                <div class="weapon-ammo"><span id="weapon0Ammo">30</span>/120</div>
            </div>
            <div class="weapon-slot" data-weapon="1">
                <div class="weapon-icon">üéØ</div>
                <div class="weapon-name">AWM</div>
                <div class="weapon-ammo"><span id="weapon1Ammo">5</span>/20</div>
            </div>
            <div class="weapon-slot" data-weapon="2">
                <div class="weapon-icon">üí•</div>
                <div class="weapon-name">M1887</div>
                <div class="weapon-ammo"><span id="weapon2Ammo">8</span>/32</div>
            </div>
        </div>

        <div id="ability-cooldown">
            <div class="ability-name" id="abilityName">FORCE FIELD</div>
            <div class="ability-status" id="abilityStatus">Press Q</div>
        </div>

        <div id="zoneWarning">‚ö†Ô∏è OUTSIDE SAFE ZONE! ‚ö†Ô∏è</div>

        <div id="startScreen">
            <h1>FREE FIRE</h1>
            <div class="subtitle">Battle Royale - 50 Players</div>
            <div class="instructions">Fast-paced 10 minute matches</div>
            <div class="instructions">Scavenge, survive, and be the last standing!</div>
            <button onclick="showCharacterSelect()">‚ö° SELECT CHARACTER</button>
        </div>

        <div id="characterSelect" style="display: none;">
            <h1 style="font-size: 48px;">SELECT CHARACTER</h1>
            <div class="character-grid">
                <div class="character-card selected" onclick="selectCharacter('chrono')">
                    <div class="char-icon">‚ö°</div>
                    <div class="char-name">Chrono</div>
                    <div class="char-ability">Creates force field barrier<br>Blocks damage</div>
                </div>
                <div class="character-card" onclick="selectCharacter('alok')">
                    <div class="char-icon">üéµ</div>
                    <div class="char-name">Alok</div>
                    <div class="char-ability">Boosts movement speed<br>Heals teammates</div>
                </div>
                <div class="character-card" onclick="selectCharacter('k')">
                    <div class="char-icon">üîã</div>
                    <div class="char-name">K</div>
                    <div class="char-ability">EP recovery boost<br>Combat stamina</div>
                </div>
            </div>
            <button onclick="startGame()">üéÆ ENTER BATTLEFIELD</button>
        </div>

        <div id="gameOverScreen" style="display: none;">
            <h1 id="victoryText">BOOYAH!</h1>
            <div id="finalStats"></div>
            <button onclick="restartGame()">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const minimapCanvas = document.getElementById('minimapCanvas');
        const minimapCtx = minimapCanvas.getContext('2d');
        const crosshair = document.getElementById('crosshair');

        let gameRunning = false;
        let keys = {};
        let mouseX = 500;
        let mouseY = 350;
        let selectedCharacter = 'chrono';
        let matchTime = 600;

        const characters = {
            chrono: {name: 'Chrono', icon: '‚ö°', ability: 'Force Field', cooldown: 200, duration: 180},
            alok: {name: 'Alok', icon: 'üéµ', ability: 'Healing Boost', cooldown: 300, duration: 300},
            k: {name: 'K', icon: 'üîã', ability: 'EP Recovery', cooldown: 250, duration: 250}
        };

        const player = {
            x: 500,
            y: 350,
            size: 18,
            vx: 0,
            vy: 0,
            speed: 3.5,
            health: 100,
            armor: 100,
            angle: 0,
            weapon: 0,
            weapons: [
                {name: 'M4A1', icon: 'üî´', ammo: 30, maxAmmo: 30, reserve: 120, damage: 18, fireRate: 6, auto: true, type: 'AR'},
                {name: 'AWM', icon: 'üéØ', ammo: 5, maxAmmo: 5, reserve: 20, damage: 95, fireRate: 50, auto: false, type: 'Sniper'},
                {name: 'M1887', icon: 'üí•', ammo: 8, maxAmmo: 8, reserve: 32, damage: 70, fireRate: 30, auto: false, type: 'Shotgun'}
            ],
            shootTimer: 0,
            abilityActive: false,
            abilityCooldown: 0,
            abilityTimer: 0
        };

        let enemies = [];
        let bullets = [];
        let lootItems = [];
        let kills = 0;
        let aliveCount = 50;
        let playZone = {x: 500, y: 350, radius: 480};
        let safeZone = {x: 500, y: 350, radius: 420};
        let zoneTimer = 0;
        let zoneDamageTimer = 0;
        let gameLoop;
        let timeLoop;

        function showCharacterSelect() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('characterSelect').style.display = 'flex';
        }

        function selectCharacter(char) {
            selectedCharacter = char;
            document.querySelectorAll('.character-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.character-card').classList.add('selected');
        }

        function startGame() {
            document.getElementById('characterSelect').style.display = 'none';
            document.getElementById('gameOverScreen').style.display = 'none';
            crosshair.style.display = 'block';
            
            const char = characters[selectedCharacter];
            document.getElementById('charName').textContent = char.name;
            document.getElementById('charAvatar').textContent = char.icon;
            document.getElementById('abilityName').textContent = char.ability.toUpperCase();
            
            player.x = 500;
            player.y = 350;
            player.health = 100;
            player.armor = 100;
            player.weapons[0].ammo = 30;
            player.weapons[0].reserve = 120;
            player.weapons[1].ammo = 5;
            player.weapons[1].reserve = 20;
            player.weapons[2].ammo = 8;
            player.weapons[2].reserve = 32;
            player.weapon = 0;
            player.shootTimer = 0;
            player.abilityActive = false;
            player.abilityCooldown = 0;
            
            enemies = [];
            bullets = [];
            lootItems = [];
            kills = 0;
            aliveCount = 50;
            matchTime = 600;
            zoneTimer = 0;
            zoneDamageTimer = 0;
            playZone = {x: 500, y: 350, radius: 480};
            safeZone = {x: 500, y: 350, radius: 420};
            gameRunning = true;
            
            spawnEnemies();
            spawnLoot();
            updateHUD();
            
            gameLoop = setInterval(update, 1000/60);
            timeLoop = setInterval(() => {
                if (gameRunning) {
                    matchTime--;
                    updateTimer();
                    if (matchTime <= 0) endGame(true);
                }
            }, 1000);
        }

        function restartGame() {
            showCharacterSelect();
        }

        function spawnEnemies() {
            for (let i = 0; i < 20; i++) {
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 350 + 100;
                enemies.push({
                    x: 500 + Math.cos(angle) * dist,
                    y: 350 + Math.sin(angle) * dist,
                    size: 18,
                    health: 100,
                    armor: 50,
                    vx: 0,
                    vy: 0,
                    shootTimer: Math.random() * 60,
                    moveTimer: Math.random() * 120,
                    weapon: Math.floor(Math.random() * 3)
                });
            }
        }

        function spawnLoot() {
            const lootTypes = [
                {type: 'health', color: '#e74c3c', value: 50},
                {type: 'armor', color: '#3498db', value: 50},
                {type: 'ammo', color: '#f39c12', value: 30}
            ];
            
            for (let i = 0; i < 15; i++) {
                const angle = Math.random() * Math.PI * 2;
                const dist = Math.random() * 400;
                const loot = lootTypes[Math.floor(Math.random() * lootTypes.length)];
                lootItems.push({
                    x: 500 + Math.cos(angle) * dist,
                    y: 350 + Math.sin(angle) * dist,
                    ...loot
                });
            }
        }

        function update() {
            if (!gameRunning) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            drawBackground();
            drawZones();
            updatePlayer();
            updateEnemies();
            updateBullets();
            updateZone();
            updateAbility();
            checkZoneDamage();
            checkLootPickup();
            
            drawLoot();
            drawPlayer();
            drawEnemies();
            drawBullets();
            drawMinimap();

            if (player.shootTimer > 0) player.shootTimer--;
            if (player.abilityCooldown > 0) {
                player.abilityCooldown--;
                updateAbilityUI();
            }
            if (player.abilityTimer > 0) player.abilityTimer--;
        }

        function drawBackground() {
            const grad = ctx.createLinearGradient(0, 0, 0, 700);
            grad.addColorStop(0, '#6b8e23');
            grad.addColorStop(0.5, '#556b2f');
            grad.addColorStop(1, '#2d5016');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = 'rgba(34, 139, 34, 0.15)';
            for (let i = 0; i < 80; i++) {
                ctx.fillRect((i * 37) % 1000, (i * 29) % 700, 25, 25);
            }
        }

        function drawZones() {
            ctx.strokeStyle = 'rgba(0, 255, 0, 0.6)';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.arc(safeZone.x, safeZone.y, safeZone.radius, 0, Math.PI * 2);
            ctx.stroke();

            ctx.strokeStyle = 'rgba(255, 0, 0, 0.6)';
            ctx.setLineDash([15, 10]);
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.arc(playZone.x, playZone.y, playZone.radius, 0, Math.PI * 2);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function updatePlayer() {
            let speedMultiplier = 1;
            if (selectedCharacter === 'alok' && player.abilityActive) {
                speedMultiplier = 1.3;
            }

            if (keys['w']) player.vy = -player.speed * speedMultiplier;
            else if (keys['s']) player.vy = player.speed * speedMultiplier;
            else player.vy *= 0.85;

            if (keys['a']) player.vx = -player.speed * speedMultiplier;
            else if (keys['d']) player.vx = player.speed * speedMultiplier;
            else player.vx *= 0.85;

            player.x += player.vx;
            player.y += player.vy;

            player.x = Math.max(30, Math.min(970, player.x));
            player.y = Math.max(30, Math.min(670, player.y));

            player.angle = Math.atan2(mouseY - player.y, mouseX - player.x);
        }

        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x, player.y);
            ctx.rotate(player.angle);
            
            if (player.abilityActive && selectedCharacter === 'chrono') {
                ctx.strokeStyle = 'rgba(138, 43, 226, 0.6)';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.arc(0, 0, 40, 0, Math.PI * 2);